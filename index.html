<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SULTAN 47 | 5D HYPERSLICE</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; }
        canvas { width: 100vw; height: 100vh; display: block; }
    </style>
</head>
<body>
    <canvas id="manifold"></canvas>

<script type="glsl" id="vs">
    attribute vec2 position;
    void main() { gl_Position = vec4(position, 0.0, 1.0); }
</script>

<script type="glsl" id="fs">
    precision highp float;
    uniform float time;
    uniform vec2 res;

    // Sultan 47 Algebra: 1ZXX-o00o-1YY â†’ 5D Extrusion
    mat2 rot(float a) { return mat2(cos(a), -sin(a), sin(a), cos(a)); }

    void main() {
        vec2 uv = (gl_FragCoord.xy - 0.5 * res.xy) / min(res.y, res.x);
        vec3 col = vec3(0.0);
        
        // 5th Dimension Vector (The K-Factor)
        float k = sin(time * 0.144); 
        
        vec3 ray = vec3(uv, 1.0);
        float t = 0.0;
        
        for(int i=0; i<32; i++) { // 28:8 Mid-Layer Slicing
            vec3 p = ray * t;
            // 5D Symmetry Fold
            p.xy *= rot(time * 0.5 + k);
            p.xz *= rot(time * 0.3);
            
            // The G.O.G. Law: 1*1=2=o0 Geometry
            float d = length(p.xy) - 0.5 + (sin(p.z * 14.4 + time) * 0.1);
            d = max(d, abs(p.z) - 0.1); // Slice Thickness
            
            if(d < 0.001 || t > 10.0) break;
            t += d;
        }

        // oO00oO1GlF+ Genesis Lighting
        col = vec3(0.1, 0.4, 1.0) * (1.0 / (1.0 + t * t * 0.5));
        col += vec3(0.5, 0.8, 1.0) * pow(max(0.0, 1.0 - t * 0.2), 10.0);
        
        gl_FragColor = vec4(col, 1.0);
    }
</script>

<script>
    const canvas = document.getElementById('manifold');
    const gl = canvas.getContext('webgl');
    
    function createShader(gl, type, source) {
        const s = gl.createShader(type);
        gl.shaderSource(s, source);
        gl.compileShader(s);
        if (!gl.getShaderParameter(s, gl.COMPILE_STATUS)) {
            console.error(gl.getShaderInfoLog(s));
        }
        return s;
    }

    const program = gl.createProgram();
    gl.attachShader(program, createShader(gl, gl.VERTEX_SHADER, document.getElementById('vs').text));
    gl.attachShader(program, createShader(gl, gl.FRAGMENT_SHADER, document.getElementById('fs').text));
    gl.linkProgram(program);
    gl.useProgram(program);

    const buffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]), gl.STATIC_DRAW);

    const pos = gl.getAttribLocation(program, "position");
    gl.enableVertexAttribArray(pos);
    gl.vertexAttribPointer(pos, 2, gl.FLOAT, false, 0, 0);

    const tLoc = gl.getUniformLocation(program, "time");
    const rLoc = gl.getUniformLocation(program, "res");

    function render(t) {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        gl.viewport(0, 0, canvas.width, canvas.height);
        gl.uniform1f(tLoc, t * 0.001);
        gl.uniform2f(rLoc, canvas.width, canvas.height);
        gl.drawArrays(gl.TRIANGLES, 0, 6);
        requestAnimationFrame(render);
    }
    render(0);
</script>
</body>
</html>
