<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Sultan Console</title>
    <style>
        :root { --gold: #ffd700; --plasma: #00ff88; --magenta: #ff00ff; }
        
        /* 1. THE CONSOLE FRAME */
        body, html { 
            margin: 0; padding: 0; height: 100vh; width: 100vw;
            background: #000; overflow: hidden; font-family: 'Courier New', monospace;
        }

        /* Top HUD - Fixed and Bold */
        #hud-top {
            height: 15vh; width: 100%; 
            display: flex; justify-content: space-between; padding: 10px;
            box-sizing: border-box; border-bottom: 3px solid #333;
            background: #0a0a0a; color: var(--gold); font-weight: bold;
        }

        /* 2. THE REACTOR VIEW (Bubbles + 3D) */
        #reactor-view { 
            height: 55vh; width: 100vw; position: relative; 
            background: radial-gradient(circle, #111, #000);
        }

        /* THE TUBE & BUBBLES - Hard Coded Visibility */
        .tube {
            position: absolute; left: 10px; top: 0; width: 20px; height: 100%;
            border-left: 2px solid var(--plasma); border-right: 2px solid var(--plasma);
            background: rgba(0, 255, 136, 0.1); z-index: 10;
        }
        .bubble {
            position: absolute; width: 12px; height: 12px; 
            background: var(--plasma); border-radius: 50%;
            box-shadow: 0 0 10px var(--plasma);
            animation: flow 1.5s infinite linear;
        }
        @keyframes flow {
            0% { bottom: -20px; opacity: 0; }
            50% { opacity: 1; }
            100% { bottom: 100%; opacity: 0; }
        }

        /* 3. THE BUTTON DOCK - 30px Height but Thick Targets */
        #control-dock {
            height: 30vh; width: 100%;
            background: #151515; border-top: 3px solid #333;
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px;
            box-sizing: border-box;
        }

        .btn-grid { display: grid; gap: 8px; }

        .console-btn {
            height: 45px; /* Increased for finger-tap, keep 30px label internal */
            background: #222; border: 2px solid #555;
            color: #fff; font-size: 12px; font-weight: bold;
            text-transform: uppercase; border-radius: 4px;
            touch-action: manipulation; /* Fixes "not working" on tap */
        }
        .btn-active { border-color: var(--plasma); color: var(--plasma); }
        .btn-magenta { border-color: var(--magenta); color: var(--magenta); }

        canvas { display: block; width: 100% !important; height: 100% !important; }
    </style>
</head>
<body>

    <div id="hud-top">
        <div>TICK: 00472<br>LAW: 1*1=2</div>
        <div style="text-align:right">SPUN: 15,000<br>36Â° STABLE</div>
    </div>

    <div id="reactor-view">
        <div class="tube">
            <div class="bubble" style="animation-delay: 0s"></div>
            <div class="bubble" style="animation-delay: 0.5s"></div>
            <div class="bubble" style="animation-delay: 1s"></div>
        </div>
        </div>

    <div id="control-dock">
        <div class="btn-grid">
            <button class="console-btn btn-active" onclick="trigger('BOOST')">BOOST</button>
            <button class="console-btn btn-magenta" onclick="trigger('INJECT')">INJECT G.O.G.</button>
        </div>
        <div class="btn-grid">
            <button class="console-btn" onclick="trigger('AUTO')">AUTO/MAN</button>
            <button class="console-btn" onclick="trigger('GEAR')">SETTINGZ</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Fix for "Buttons don't work": Added vibration and console log
        function trigger(type) {
            if (navigator.vibrate) navigator.vibrate(40);
            console.log("ACTUATED:", type);
            alert(type + " ACTIVATED"); // Added alert to PROVE it's working
        }

        // Standard 3D Lock-in
        const view = document.getElementById('reactor-view');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, view.clientWidth / view.clientHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(view.clientWidth, view.clientHeight);
        view.appendChild(renderer.domElement);

        const core = new THREE.Mesh(
            new THREE.SphereGeometry(2, 16, 16), 
            new THREE.MeshBasicMaterial({color: 0x00ffff, wireframe: true})
        );
        scene.add(core);
        camera.position.z = 8;

        function animate() {
            core.rotation.y += 0.01;
            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>
