<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Sultan Touch Console</title>
    <style>
        :root { --gold: #ffd700; --plasma: #00ff88; --magenta: #ff00ff; }
        
        /* 1. FORCE THE LAYOUT */
        * { touch-action: none; user-select: none; box-sizing: border-box; }
        body, html { margin: 0; padding: 0; height: 100%; width: 100vw; background: #000; overflow: hidden; font-family: monospace; }

        /* HUD (Zone 8) */
        #hud {
            height: 15%; width: 100%; border-bottom: 2px solid #333;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 15px; color: var(--gold); font-size: 12px;
        }

        /* REACTOR VIEWPORT (70%) */
        #viewport { height: 55%; width: 100%; position: relative; overflow: hidden; }

        /* PLASMA TUBES (Zone 11) */
        .tube { position: absolute; left: 10px; width: 15px; height: 100%; border: 1px solid var(--plasma); background: rgba(0,255,136,0.1); }
        .bubble { position: absolute; width: 10px; height: 10px; background: var(--plasma); border-radius: 50%; box-shadow: 0 0 10px var(--plasma); animation: flow 1.2s infinite linear; }
        @keyframes flow { 0% { bottom: -10px; opacity: 0; } 50% { opacity: 1; } 100% { bottom: 100%; opacity: 0; } }

        /* 30PX BUTTON DOCK (30%) */
        #dock {
            height: 30%; width: 100%; background: #111; border-top: 2px solid #333;
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px;
            padding-bottom: env(safe-area-inset-bottom);
        }

        .btn-grid { display: grid; grid-template-rows: 1fr 1fr; gap: 8px; }

        /* THE HARD BUTTONS */
        .sultan-btn {
            height: 45px; /* Large touch target */
            background: #222; border: 2px solid var(--gold);
            color: #fff; font-weight: bold; font-size: 14px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 5px;
        }
        .sultan-btn:active { background: var(--gold); color: #000; }
        .btn-inject { border-color: var(--magenta); color: var(--magenta); }
        .btn-inject:active { background: var(--magenta); color: #000; }

        canvas { width: 100% !important; height: 100% !important; display: block; }
    </style>
</head>
<body>

    <div id="hud">
        <div>LAW: 1*1=2<br>TICK: <span id="tick">0</span></div>
        <div style="text-align:right">RPM: 15,000<br>36Â° STABLE</div>
    </div>

    <div id="viewport">
        <div class="tube">
            <div class="bubble" style="animation-delay: 0s"></div>
            <div class="bubble" style="animation-delay: 0.4s"></div>
            <div class="bubble" style="animation-delay: 0.8s"></div>
        </div>
        </div>

    <div id="dock">
        <div class="btn-grid">
            <div class="sultan-btn" onpointerdown="actuate('BOOST', 50)">BOOST</div>
            <div class="sultan-btn" onpointerdown="actuate('CYCLE', 10)">CYCLE</div>
        </div>
        <div class="btn-grid">
            <div class="sultan-btn btn-inject" onpointerdown="actuate('GOG', 100)">INJECT GOG</div>
            <div class="sultan-btn" onpointerdown="actuate('SETTINGS', 20)">SETTINGZ</div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // HAPTIC ACTUATION
        function actuate(type, force) {
            if (navigator.vibrate) navigator.vibrate(force);
            console.log("SULTAN COMMAND:", type);
            // Visual feedback for GOG law
            if(type === 'GOG') {
                core.material.color.setHex(0xff00ff);
                setTimeout(() => core.material.color.setHex(0x00ffff), 150);
            }
        }

        // 3D CORE ENGINE
        const view = document.getElementById('viewport');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, view.clientWidth / view.clientHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(view.clientWidth, view.clientHeight);
        view.appendChild(renderer.domElement);

        const core = new THREE.Mesh(
            new THREE.SphereGeometry(2.5, 12, 12), 
            new THREE.MeshBasicMaterial({color: 0x00ffff, wireframe: true})
        );
        scene.add(core);
        camera.position.z = 10;

        let ticks = 0;
        function animate() {
            core.rotation.y += 0.01;
            core.rotation.x += 0.005;
            ticks++;
            if(ticks % 20 === 0) document.getElementById('tick').innerText = ticks;
            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>
